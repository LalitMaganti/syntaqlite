# Copyright 2025 The syntaqlite Authors. All rights reserved.
# Licensed under the Apache License, Version 2.0.

# Build targets for third-party source code.

executable("lemon") {
  sources = [ "src/sqlite/tool/lemon.c" ]
}

# GoogleTest library
config("googletest_config") {
  include_dirs = [
    "src/googletest/googletest/include",
    "src/googletest/googlemock/include",
  ]
}

source_set("googletest") {
  sources = [
    "src/googletest/googlemock/src/gmock-all.cc",
    "src/googletest/googletest/src/gtest-all.cc",
  ]

  public_configs = [ ":googletest_config" ]

  include_dirs = [
    "src/googletest/googletest",
    "src/googletest/googlemock",
  ]

  # Suppress warnings in third-party code
  configs += [ ":googletest_internal_config" ]
}

config("googletest_internal_config") {
}

# GoogleTest main() for tests that don't define their own
source_set("googletest_main") {
  sources = [ "src/googletest/googletest/src/gtest_main.cc" ]
  deps = [ ":googletest" ]
}
